{% extends "base/base.html" %}

{% load staticfiles %}

{% block page_title %}Team summary{% endblock %}

{% block css %}
    {{block.super}}
    <!-- Important Owl stylesheet -->
    <link rel="stylesheet" href="{% static 'css/libs/owl-carousel/owl.carousel.css' %}">

    <!-- Default Theme -->
    <link rel="stylesheet" href="{% static 'css/libs/owl-carousel/owl.theme.css' %}">

    <link href="{% static 'css/slideshow/view.css' %}" rel="stylesheet">
{% endblock css %}

{% block js %}
    {{block.super}}
    <script src="{% static 'js/libs/owl-carousel/owl.carousel.js' %}"></script>
    <script type="text/javascript">
        $(document).ready(function() {

          $("#board-carousel, #member-carousel").owlCarousel({
            singleItem: true,
            autoPlay: 7000
          });

        });
    </script>

{% endblock js %}

{% block content %}
    <h1>Learn about our team</h1>

    <div class="row">
        <div class="col-md-6">
            <div id="member-carousel" class="owl-carousel">
                {% for member_i in members %}
                    {% if member_i.is_developer %}
                        <img id="spent_time_by_day_of_the_week" src="{% url 'charts:spent_time_by_day_of_the_week' member_i.id %}" alt="Spent time by {{member_i.trello_username}}"/>
                    {% endif %}
                {% endfor %}
                <img id="spent_time_by_week" src="{% url 'charts:spent_time_by_week' %}" alt="Spent time by member"/>
                <img src="{% url 'charts:task_backward_movements_by_member' %}" alt="Task backward movements by member"/>
            </div>
        </div>
        <div class="col-md-6">
            <div id="board-carousel" class="owl-carousel">
                {% for board in boards %}
                    {% if board.last_fetch_datetime and board.is_fetched and board.is_ready %}
                        {% include "boards/components/view/number_of_spent_hours.html" %}
                        {% include "boards/components/view/current_percentage_of_completion.html" %}
                        <img src="{% url 'charts:number_of_cards_worked_on_by_month' board.id %}" alt="Tasks worked on by month"/>
                        <img src="{% url 'charts:cumulative_list_evolution' board.id %}" alt="Evolution of number of tasks by list"/>
                        <img src="{% url 'charts:avg_spent_time_by_month' board.id %}" alt="Average spent time by month"/>
                        <img src="{% url 'charts:task_backward_movements_by_member' board.id %}" alt="Task backward movements by member"/>
                        {% if board.interruptions.all.exist %}
                            <img src="{% url 'charts:interruptions_by_month' board.id %}" alt="Interruptions by month"/>
                        {% endif %}
                    {% endif %}
                {% endfor %}
                <img src="{% url 'charts:avg_spent_time' %}" alt="Average spent time"/>
            </div>
        </div>

{% endblock %}