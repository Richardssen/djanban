{% extends "boards/view.html" %}

{% block page_title %}Requirements of board {{board.name}}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-12 card">
            <div class="panel panel-info">
              <div class="panel-heading">
                  Requirement {{requirement.code}}
              </div>
              <div class="panel-body row">
                  <div class="col-md-12">
                      <div class="actions">
                            <a href="{% url 'boards:requirements:edit_requirement' board.id requirement.code %}" title="Edit requirement {{requirement.code}}">
                                <span class="fa fa-pencil"></span>
                            </a>
                            <a href="{% url 'boards:requirements:delete_requirement' board.id requirement.code %}" title="Delete requirement {{requirement.code}}">
                                <span class="fa fa-trash"></span>
                            </a>
                      </div>
                      <div>
                          {{requirement.name}}
                      </div>
                      <div>
                          {{requirement.description}}
                      </div>
                      <div class="row">
                          <div class="col-md-12">
                              {% if requirement.pending_cards|length == 0 and requirement.done_cards|length == 0 %}
                                There are no cards assigned to this requirement.
                              {% else %}
                                {% with done_cards_percentage=requirement.done_cards_percentage %}
                                    <div class="row">
                                        <div class="col-md-12">
                                          <div class="progress">
                                              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{done_cards_percentage}}%;">
                                                {{done_cards_percentage}}%
                                              </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endwith %}
                                    <div class="row">
                                    <p>Pending cards</p>
                                  {% for card in requirement.pending_cards %}
                                    {% include "cards/components/card.html" %}
                                  {% endfor %}
                                    </div>
                                <div class="row">
                                    <p>Done cards</p>
                                  {% for card in requirement.done_cards %}
                                    {% include "cards/components/card.html" %}
                                  {% endfor %}
                                </div>
                              {% endif %}
                          </div>
                      </div>
                  </div>
              </div>
            </div>
        </div>
    </div>
{% endblock content %}