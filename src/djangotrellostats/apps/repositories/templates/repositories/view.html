{% extends "boards/view.html" %}

{% block page_title %}Repository {{repository.name}} of project {{board.name}}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-12 card">
            <div class="panel panel-info">
              <div class="panel-heading">
                  <h1>Repository {{repository.name}} of project {{board.name}}</h1>
              </div>
              <div class="panel-body row">
                  <div class="col-md-12">
                      <div class="actions">
                            <a href="{% url 'boards:repositories:edit_repository' board.id repository.id %}" title="Edit repository {{repository.id}}">
                                <span class="fa fa-pencil"></span>
                            </a>
                            <a href="{% url 'boards:repositories:delete_repository' board.id repository.id %}" title="Delete repository {{repository.id}}">
                                <span class="fa fa-trash"></span>
                            </a>
                      </div>

                      <div class="row">
                           <div class="col-md-12 description">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      Name
                                  </div>
                                <div class="panel-body">
                                    {{repository.name}}
                                </div>
                           </div>
                        </div>
                      </div>

                      <div class="row">
                           <div class="col-md-12 description">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      Description
                                  </div>
                                <div class="panel-body">
                                    {{repository.description|safe}}
                                </div>
                           </div>
                        </div>
                      </div>

                      <div class="row">
                           <div class="col-md-12 description">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      URL
                                  </div>
                                <div class="panel-body">
                                    {{repository.url}}
                                </div>
                           </div>
                        </div>
                      </div>

                      <div class="row">
                          <div class="col-md-6">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      Type
                                  </div>
                                <div class="panel-body">
                                    {{repository.type}}
                                </div>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      Repository specific attributes
                                  </div>
                                <div class="panel-body">
                                    {{repository.derived_object}}
                                </div>
                            </div>
                          </div>
                      </div>

                      <div class="row">
                           <div class="col-md-12">
                            <div class="panel panel-info">
                                  <div class="panel-heading">
                                      Commits
                                  </div>
                                <div class="panel-body">
                                    <a href="{% url 'boards:repositories:add_commit' board.id repository.id %}">
                                        <span class="fa fa-plus"></span> Add new commit
                                    </a>
                                    {% with commits=repository.commits.all %}
                                        {% if commits|length > 0 %}
                                            {% for commit in commits %}
                                                <div>
                                                    <strong>{{commit.commit}}</strong> on {{commit.creation_datetime}}
                                                    <span>
                                                        <a href="{% url 'boards:repositories:assess_python_code_quality' board.id repository.id commit.id %}" title="Assess quality of Python code on {{commit.commit}}">
                                                            <span class="fa fa-star-half-full"></span>
                                                            Assess Python code quality
                                                        </a>
                                                        <a href="{% url 'boards:repositories:delete_commit' board.id repository.id commit.id %}" title="Delete commit {{commit.commit}}">
                                                            <span class="fa fa-trash"></span>
                                                            Delete
                                                        </a>
                                                    </span>
                                                </div>
                                            {% endfor %}
                                        {% else %}
                                            There are no commits for this repository
                                        {% endif %}
                                    {% endwith %}
                                </div>
                           </div>
                        </div>
                      </div>



                  </div>
              </div>
            </div>
        </div>
    </div>
{% endblock content %}